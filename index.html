<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AWS Python SDK (boto3) for R • botor</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="AWS Python SDK (boto3) for R">
<meta property="og:description" content="Fork-safe, raw access to the Amazon Web Services (AWS) SDK via the boto3 Python module, and convenient helper functions to query the Simple Storage Service (S3) and Key Management Service (KMS), partial support for IAM, the Systems Manager Parameter Store and Secrets Manager.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">botor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.4.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/daroczig/botor/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="botor-reticulate-wrapper-on-boto3-">botor: Reticulate wrapper on ‘boto3’ <a href="https://daroczig.github.io/botor/" class="external-link"><img src="reference/figures/logo.png" align="right" height="138" alt="botor website"></a>
<a class="anchor" aria-label="anchor" href="#botor-reticulate-wrapper-on-boto3-"></a>
</h1></div>
<!-- badges: start -->

<p>This R package provides raw access to the ‘Amazon Web Services’ (‘AWS’) ‘SDK’ via the ‘boto3’ Python module and some convenient helper functions (currently for S3 and KMS) and workarounds, eg taking care of spawning new resources in forked R processes.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>This package requires Python to be installed along with the <code>boto3</code> Python module, which can be installed from R via:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_install.html" class="external-link">py_install</a></span><span class="op">(</span><span class="st">'boto3'</span><span class="op">)</span></span></code></pre></div>
<p>If that might result in technical problems that you cannot solve, then it’s probably easier to install a standalone Python along with the system dependencies etc via <a href="https://github.com/hafen/rminiconda" class="external-link"><code>rminiconda</code></a>.</p>
<p>Once the Python dependencies are resolved, you can either install from CRAN or the most recent (development version) of <code>botor</code> can be installed from GitHub:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'daroczig/botor'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="loading-the-package">Loading the package<a class="anchor" aria-label="anchor" href="#loading-the-package"></a>
</h2>
<p>Loading the <code>botor</code> package might take a while as it will also <code>import</code> the <code>boto3</code> Python module in the background:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://daroczig.github.io/botor/" class="external-link">botor</a></span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    user  system elapsed</span></span>
<span><span class="co">#&gt;   1.131   0.250   1.191</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Quick examples:</p>
<ol style="list-style-type: decimal">
<li>
<p>Check the currently used AWS user’s name:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/iam_whoami.html">iam_whoami</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "gergely-dev"</span></span></code></pre></div>
</li>
<li>
<p>Read a <code>csv</code> file stored in S3 using a helper function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/s3_read.html">s3_read</a></span><span class="op">(</span><span class="st">'s3://botor/example-data/mtcars.csv'</span>, <span class="va">read.csv</span><span class="op">)</span></span>
<span><span class="co">#&gt;     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; 1  21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; 2  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span></span>
<span><span class="co">#&gt; ...</span></span></code></pre></div>
</li>
<li>
<p>Encrypt a string via KMS using a helper function:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/kms_encrypt.html">kms_encrypt</a></span><span class="op">(</span><span class="st">'alias/key'</span>, <span class="st">'secret'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "QWERTY..."</span></span></code></pre></div>
</li>
<li>
<p>Get more info on the currently used AWS user calling the IAM client directly:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/iam.html">iam</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">get_user</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Create a new client to a service without helper functions:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ec2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/botor_client.html">botor_client</a></span><span class="op">(</span><span class="st">'ec2'</span><span class="op">)</span></span>
<span><span class="va">ec2</span><span class="op">$</span><span class="fu">describe_vpcs</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="aws-auth">AWS Auth<a class="anchor" aria-label="anchor" href="#aws-auth"></a>
</h2>
<p>The <code>botor</code> package by default will use the credentials and related options set in <a href="https://boto3.amazonaws.com/v1/documentation/api/latest/guide/configuration.html#configuration" class="external-link">environmental variables</a> or in the <code>~/.aws/config</code> and <code>~/.aws/credentials</code> files. If you need to specify a custom profile or AWS region etc, there are various options with different complexity and flexibility:</p>
<ul>
<li>set the related environment variable(s) before loading <code>botor</code>
</li>
<li>call the <code><a href="reference/botor.html">botor()</a></code> function with the relevant argument to set the config of the default session for the <code>botor</code> helper functions, eg</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'eu-west-42'</span><span class="op">)</span></span></code></pre></div>
<ul>
<li>if you need to manage multiple sessions, then use the raw <code>boto3</code> object from the <code>botor</code> package and <code>boto3.session.Session</code> to init these custom sessions and the required clients/resources on the top of those, eg</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_custom_session1</span> <span class="op">&lt;-</span> <span class="va">boto3</span><span class="op">$</span><span class="fu">Session</span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'us-west-1'</span><span class="op">)</span></span>
<span><span class="va">my_custom_s3_client1</span> <span class="op">&lt;-</span> <span class="va">my_custom_session1</span><span class="op">$</span><span class="fu">client</span><span class="op">(</span><span class="st">'s3'</span><span class="op">)</span></span>
<span><span class="va">my_custom_session2</span> <span class="op">&lt;-</span> <span class="va">boto3</span><span class="op">$</span><span class="fu">Session</span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'us-west-2'</span><span class="op">)</span></span>
<span><span class="va">my_custom_s3_client2</span> <span class="op">&lt;-</span> <span class="va">my_custom_session2</span><span class="op">$</span><span class="fu">client</span><span class="op">(</span><span class="st">'s3'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="using-the-raw-boto3-module">Using the raw <code>boto3</code> module<a class="anchor" aria-label="anchor" href="#using-the-raw-boto3-module"></a>
</h2>
<p>The <code>botor</code> package provides the <code>boto3</code> object with full access to the <code>boto3</code> Python SDK. Quick example on listing all S3 buckets:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://daroczig.github.io/botor/" class="external-link">botor</a></span><span class="op">)</span></span>
<span><span class="va">s3</span> <span class="op">&lt;-</span> <span class="va">boto3</span><span class="op">$</span><span class="fu">resource</span><span class="op">(</span><span class="st">'s3'</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/reticulate/" class="external-link">reticulate</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/iterate.html" class="external-link">iter_next</a></span><span class="op">(</span><span class="va">s3</span><span class="op">$</span><span class="va">buckets</span><span class="op">$</span><span class="fu">pages</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Note that this approach requires a stable understanding of the <code>boto3</code> Python module, plus a decent familiarity with <code>reticulate</code> as well (see eg <code>iter_next</code>) – so you might want to rather consider using the helper functions described below.</p>
</div>
<div class="section level2">
<h2 id="using-the-default-botor-session">Using the default <code>botor</code> session<a class="anchor" aria-label="anchor" href="#using-the-default-botor-session"></a>
</h2>
<p>Calling <code><a href="reference/botor.html">botor()</a></code> will provide you a default <code>boto3</code> session that is cached internally. You can always override the default session by calling <code><a href="reference/botor.html">botor()</a></code> again with new arguments. See eg setting the default <code>boto3</code> session to use <code>us-west-2</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'us-west-2'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="fu">resource</span><span class="op">(</span><span class="st">'s3'</span><span class="op">)</span></span></code></pre></div>
<p>A great advantage of using <code><a href="reference/botor.html">botor()</a></code> instead of custom sessions is that it’s fork-safe. See eg:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'pid'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 31225</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'pid'</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 31225</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'pid'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 31225</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 31225</span></span>
<span></span>
<span><span class="fu">mclapply</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">'pid'</span><span class="op">)</span>, mc.cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt; [1] 13209</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt; [1] 13210</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="convenient-helper-functions">Convenient helper functions<a class="anchor" aria-label="anchor" href="#convenient-helper-functions"></a>
</h2>
<p>Besides the <code>botor</code> pre-initialized default Boto3 session, the package also provides some further R helper functions for the most common AWS actions, like interacting with S3 or KMS. Note, that the list of these functions is pretty limited for now, but you can always fall back to the raw Boto3 functions if needed. PRs on new helper functions are appreciated :)</p>
<p>Examples:</p>
<ol style="list-style-type: decimal">
<li>
<p>Listing all S3 buckets takes some time as it will first initialize the S3 Boto3 client in the background:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="st">'elapsed'</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 1.426</span></span></code></pre></div>
</li>
<li>
<p>But the second query is much faster as reusing the same <code>s3</code> Boto3 resource:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="st">'elapsed'</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 0.323</span></span></code></pre></div>
</li>
<li>
<p>Unfortunately, sharing the same Boto3 resource between (forked) processes is not ideal, so <code>botor</code> will take care of that by spawning new resources in the forked threads:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">simplify2array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">mclapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="st">'elapsed'</span><span class="op">]</span><span class="op">]</span>, mc.cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1.359 1.356 0.406 0.397</span></span></code></pre></div>
</li>
<li>
<p>Want to speed it up more?</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://memoise.r-lib.org" class="external-link">memoise</a></span><span class="op">)</span></span>
<span><span class="va">s3_list_buckets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://memoise.r-lib.org/reference/memoise.html" class="external-link">memoise</a></span><span class="op">(</span><span class="va">s3_list_buckets</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">simplify2array</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/parallel/mclapply.html" class="external-link">mclapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/system.time.html" class="external-link">system.time</a></span><span class="op">(</span><span class="fu"><a href="reference/s3_list_buckets.html">s3_list_buckets</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">[[</span><span class="st">'elapsed'</span><span class="op">]</span><span class="op">]</span>, mc.cores <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1.330 1.332 0.000 0.000</span></span></code></pre></div>
</li>
</ol>
<p>The currently supported resources and features via helper functions: <a href="https://daroczig.github.io/botor/reference/index.html" class="external-link uri">https://daroczig.github.io/botor/reference/index.html</a></p>
</div>
<div class="section level2">
<h2 id="error-handling">Error handling<a class="anchor" aria-label="anchor" href="#error-handling"></a>
</h2>
<p>The convenient helper functions try to suppress the boring Python traceback and provide you only the most relevant information on the error. If you want to see the full tracelog and more details after an error, call <code><a href="https://rstudio.github.io/reticulate/reference/py_last_error.html" class="external-link">reticulate::py_last_error()</a></code>. When working with the raw <code>boto3</code> wrapper, you may find <code>botor:::trypy</code> useful as well.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/s3_download_file.html">s3_download_file</a></span><span class="op">(</span><span class="st">'s3://bottttor/example-data/mtcars.csv'</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in s3_download_file("s3://bottttor/example-data/mtcars.csv", tempfile()) :</span></span>
<span><span class="co">#&gt;   Python `ClientError`: An error occurred (404) when calling the HeadObject operation: Not Found</span></span>
<span></span>
<span><span class="fu"><a href="reference/s3_read.html">s3_read</a></span><span class="op">(</span><span class="st">'s3://botor/example-data/mtcars2.csv'</span>, <span class="va">read.csv</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in s3_download(object, t) :</span></span>
<span><span class="co">#&gt;   Python `ClientError`: An error occurred (403) when calling the HeadObject operation: Forbidden</span></span>
<span></span>
<span><span class="fu"><a href="reference/botor.html">botor</a></span><span class="op">(</span>region_name <span class="op">=</span> <span class="st">'us-west-2'</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/s3_read.html">s3_read</a></span><span class="op">(</span><span class="st">'s3://botor/example-data/mtcars.csv'</span>, <span class="va">read.csv</span><span class="op">)</span></span>
<span><span class="co">#&gt;     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; 1  21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; 2  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span></span>
<span><span class="co">#&gt; ...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="logging">Logging<a class="anchor" aria-label="anchor" href="#logging"></a>
</h2>
<p><code>botor</code> uses the <a href="https://daroczig.github.io/logger/" class="external-link"><code>logger</code></a> package to write log messages to the console by default with the following log level standards:</p>
<ul>
<li>
<code>TRACE</code> start of an AWS query (eg just about to start listing all S3 buckets in an AWS account)</li>
<li>
<code>DEBUG</code> summary on the result of an AWS query (eg number of S3 buckets found in an AWS account)</li>
<li>
<code>INFO</code> currently not used</li>
<li>
<code>WARN</code> currently not used</li>
<li>
<code>ERROR</code> something bad happened and logging extra context besides what’s being returned in the error message</li>
<li>
<code>FATAL</code> currently not used</li>
</ul>
<p>The default log level threshold set to <code>DEBUG</code>. If you want to update that, use the package name for the <code>namespace</code> argument of <code>log_threshold</code> from the <code>logger</code> package, eg to enable all log messages:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://daroczig.github.io/logger/" class="external-link">logger</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://daroczig.github.io/logger/reference/log_threshold.html" class="external-link">log_threshold</a></span><span class="op">(</span><span class="va">TRACE</span>, namespace <span class="op">=</span> <span class="st">'botor'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/s3_download_file.html">s3_download_file</a></span><span class="op">(</span><span class="st">'s3://botor/example-data/mtcars.csv'</span>, <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; TRACE [2019-01-11 14:48:07] Downloading s3://botor/example-data/mtcars.csv to '/tmp/RtmpCPNrOk/file6fac556567d4' ...</span></span>
<span><span class="co">#&gt; DEBUG [2019-01-11 14:48:09] Downloaded 1303 bytes from s3://botor/example-data/mtcars.csv and saved at '/tmp/RtmpCPNrOk/file6fac556567d4'</span></span></code></pre></div>
<p>Or update to not fire the less important messages than warnings:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://daroczig.github.io/logger/" class="external-link">logger</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://daroczig.github.io/logger/reference/log_threshold.html" class="external-link">log_threshold</a></span><span class="op">(</span><span class="va">WARN</span>, namespace <span class="op">=</span> <span class="st">'botor'</span><span class="op">)</span></span></code></pre></div>
<p>You can use the same approach to set custom (or more than one) log appenders, eg writing the log messages to files, a database etc – check the <code>logger</code> docs for more details.</p>
</div>
<div class="section level2">
<h2 id="why-the-name">Why the name?<a class="anchor" aria-label="anchor" href="#why-the-name"></a>
</h2>
<p><code>botor</code> means “goofy” in Hungarian. This is how I feel when looking back to all the dev hours spent on integrating the AWS Java SDK in R – this includes <code>AWR.KMS</code>, where I ended up debugging and fixing many issues in forked processes, but <code>AWR.Kinesis</code> still rocks :)</p>
<p>The name also reminds you that it’s not exactly <code>boto3</code>, as eg you have to use <code>$</code> instead of <code>.</code> to access methods.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=botor" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/daroczig/botor/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/daroczig/botor/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/AGPL-3" class="external-link">AGPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing botor</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Gergely Daróczi <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3149-8537" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>
<a href="https://system1.com" class="external-link"><img src="https://cdn.system1.com/s1c/dist/img/system1-logo.svg" height="24" style="background-color:grey;"></a> <br><small class="roles"> Funder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://github.com/daroczig/botor/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/daroczig/botor/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/daroczig/botor" class="external-link"><img src="https://codecov.io/gh/daroczig/botor/branch/master/graph/badge.svg" alt="Code Coverage"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Gergely Daróczi, <a href="https://system1.com" class="external-link"><img src="https://cdn.system1.com/s1c/dist/img/system1-logo.svg" height="24" style="background-color:grey;"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer>
</div>






  </body>
</html>
